{"ast":null,"code":"import _slicedToArray from \"/home/cyan/Desktop/projects/go-react-chat/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useState, useRef } from \"react\";\nimport socketIOClient from \"socket.io-client\";\n\nfunction useChat() {\n  let socketRef = useRef();\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        messages = _useState2[0],\n        setMessages = _useState2[1];\n\n  useEffect(() => {\n    socketRef.current = socketIOClient(\"ws://localhost:5300\", {\n      transports: ['websocket']\n    });\n    socketRef.current.on(\"newChatMessage\", function (msg) {\n      setMessages(messages => [...messages, msg]);\n    });\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, []);\n\n  const sendMessage = message => {\n    socketRef.current.emit(\"newChatMessage\", {\n      message\n    });\n  };\n\n  return {\n    messages,\n    sendMessage\n  };\n}\n\nexport default useChat;","map":{"version":3,"sources":["/home/cyan/Desktop/projects/go-react-chat/frontend/src/hooks/useChat/useChat.jsx"],"names":["useEffect","useState","useRef","socketIOClient","useChat","socketRef","messages","setMessages","current","transports","on","msg","disconnect","sendMessage","message","emit"],"mappings":";AAAA,SAASA,SAAT,EAAoBC,QAApB,EAA8BC,MAA9B,QAA4C,OAA5C;AACA,OAAOC,cAAP,MAA2B,kBAA3B;;AAEA,SAASC,OAAT,GAAmB;AACf,MAAIC,SAAS,GAAGH,MAAM,EAAtB;;AADe,oBAEiBD,QAAQ,CAAC,EAAD,CAFzB;AAAA;AAAA,QAERK,QAFQ;AAAA,QAEEC,WAFF;;AAIfP,EAAAA,SAAS,CAAC,MAAM;AACZK,IAAAA,SAAS,CAACG,OAAV,GAAoBL,cAAc,CAAC,qBAAD,EAAwB;AAACM,MAAAA,UAAU,EAAE,CAAC,WAAD;AAAb,KAAxB,CAAlC;AAEAJ,IAAAA,SAAS,CAACG,OAAV,CAAkBE,EAAlB,CAAqB,gBAArB,EAAuC,UAAUC,GAAV,EAAe;AAClDJ,MAAAA,WAAW,CAACD,QAAQ,IAAI,CAAC,GAAGA,QAAJ,EAAcK,GAAd,CAAb,CAAX;AACH,KAFD;AAIA,WAAO,MAAM;AACTN,MAAAA,SAAS,CAACG,OAAV,CAAkBI,UAAlB;AACH,KAFD;AAGH,GAVQ,EAUN,EAVM,CAAT;;AAYA,QAAMC,WAAW,GAAIC,OAAD,IAAa;AAC7BT,IAAAA,SAAS,CAACG,OAAV,CAAkBO,IAAlB,CAAuB,gBAAvB,EAAyC;AAACD,MAAAA;AAAD,KAAzC;AACH,GAFD;;AAIA,SAAO;AAAER,IAAAA,QAAF;AAAYO,IAAAA;AAAZ,GAAP;AACH;;AAED,eAAeT,OAAf","sourcesContent":["import { useEffect, useState, useRef } from \"react\"\nimport socketIOClient from \"socket.io-client\"\n\nfunction useChat() {\n    let socketRef = useRef();\n    const [messages, setMessages] = useState([]);\n\n    useEffect(() => {\n        socketRef.current = socketIOClient(\"ws://localhost:5300\", {transports: ['websocket']});\n\n        socketRef.current.on(\"newChatMessage\", function (msg) {\n            setMessages(messages => [...messages, msg])\n        });\n\n        return () => {\n            socketRef.current.disconnect();\n        }\n    }, []);\n\n    const sendMessage = (message) => {\n        socketRef.current.emit(\"newChatMessage\", {message})\n    };\n\n    return { messages, sendMessage }\n}\n\nexport default useChat"]},"metadata":{},"sourceType":"module"}